FROM python:3.10.5-bullseye

WORKDIR /tmp/

RUN pip install poetry

COPY pyproject.toml /opt/app/
COPY poetry.lock /opt/app/

WORKDIR /opt/app/

RUN poetry install

COPY . /opt/app/

RUN poetry install

WORKDIR /opt/app/tests/integration